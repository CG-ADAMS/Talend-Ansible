---
# This script performs different parameters validation

######################################
# Kafka-specific parameters validation
######################################

# Check folder-type parameters: zook_datadir, kafka_log_dirs
- include_tasks: ../../common/tasks/params_validation_dir.yml
  with_items:
    - "{{zook_datadir}}"
    - "{{kafka_log_dirs}}"
  loop_control:
    loop_var: app_dir

# Check port-type parameter: zook_clientPort
- name: Check port-type parameters
  fail:
    msg: "Parameter {{item.name}} has value {{item.value}}, which is not a valid TCP/IP port number !"
  when: not ( item.value | string | regex_search( '[0-9]*' ) ) or ( item.value | int < 0 ) or ( item.value | int > 65535 )
  with_items:
    - { name: "zook_clientPort", value: "{{zook_clientPort}}" }
